<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For Lauryn üíå</title>

  <style>
    :root{
      --blur-page1: 16px;
      --blur-page2: 4px;
      --dim: 0.28;         /* overall darkening */
      --vignette: 0.55;    /* edge darkening strength */
    }

    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:18px;
      overflow-x:hidden;
      background:#000; /* fallback */
    }

    /* Background layers */
    .bg{
      position:fixed;
      inset:0;
      z-index:-3;
      background-image:url("lauryn.jpg");
      background-size:cover;
      background-position:center;
      background-repeat:no-repeat;
      transform:scale(1.06);
      will-change:filter, transform;
      transition:filter 900ms ease, transform 900ms ease;
      filter: blur(var(--blur-page1));
    }

    /* Slight darkening so text pops */
    .dim{
      position:fixed;
      inset:0;
      z-index:-2;
      background: rgba(0,0,0,var(--dim));
      pointer-events:none;
    }

    /* Cinematic vignette */
    .vignette{
      position:fixed;
      inset:0;
      z-index:-1;
      pointer-events:none;
      background: radial-gradient(
        circle at center,
        rgba(0,0,0,0) 45%,
        rgba(0,0,0,var(--vignette)) 100%
      );
    }

    /* When page 2 shows, sharpen background a bit and reduce scale */
    body.page2 .bg{
      filter: blur(var(--blur-page2));
      transform:scale(1.02);
    }

    .card{
      max-width:720px;
      padding:28px;
      border:1px solid rgba(255,255,255,0.25);
      border-radius:18px;
      box-shadow:0 12px 40px rgba(0,0,0,.35);
      margin:18px;
      text-align:center;
      background: rgba(255,255,255,0.92);
      backdrop-filter: blur(6px);
    }

    h1{font-size:38px;margin:0 0 10px}
    p{font-size:18px;line-height:1.5;margin:0 0 18px}

    .btns{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
    button{border:0;border-radius:14px;padding:14px 18px;font-size:18px;cursor:pointer}
    .yes{background:#111;color:#fff}
    .no{background:#f1f1f1}

    .note{margin-top:14px;font-size:14px;opacity:.75}
    .msg{margin-top:16px;font-size:20px;font-weight:600}

    input{
      font-size:16px;
      padding:12px 14px;
      border-radius:12px;
      border:1px solid #ddd;
      width:min(360px,100%);
      background:#fff;
    }
    .row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:10px}
    .hint{font-size:14px;opacity:.75;margin-top:10px}
    .hidden{display:none}

    iframe{
      border-radius:12px;
      border:1px solid #eee;
      width:min(520px,100%);
      height:152px;
      margin-top:14px;
      background:#fff;
    }

    /* Page 2 card entrance animation */
    .popIn{
      animation: popIn 520ms ease both;
    }
    @keyframes popIn{
      from{ opacity:0; transform: translateY(10px) scale(0.985); }
      to{ opacity:1; transform: translateY(0) scale(1); }
    }

    /* Confetti overlay */
    #confettiCanvas{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:9999;
    }
  </style>
</head>

<body class="page1">
  <div class="bg" aria-hidden="true"></div>
  <div class="dim" aria-hidden="true"></div>
  <div class="vignette" aria-hidden="true"></div>

  <canvas id="confettiCanvas" class="hidden"></canvas>

  <!-- PAGE 1 -->
  <div class="card" id="page1">
    <h1>Lauryn ‚ù§Ô∏è</h1>

    <p>Before you unlock your Valentine message, answer this üòå</p>
    <p><b>Question:</b> What was the acronym we used when we first started to know each other?</p>

    <div class="row">
      <input id="answer" placeholder="Type your answer here..." autocomplete="off" />
      <button class="yes" id="unlockBtn">Unlock üíå</button>
    </div>

    <div class="hint">Hint: three letters. Not case sensitive.</div>
    <div class="msg" id="status"></div>

    <div class="note">Made with love by Paul-Emmanuel.</div>
  </div>

  <!-- PAGE 2 -->
  <div class="card hidden" id="page2">
    <h1>Lauryn üíå</h1>

    <p>
      I made this little page just for you.<br/>
      Will you be my Valentine?
    </p>

    <div class="btns">
      <button class="yes" id="yesBtn">Yes ‚ù§Ô∏è</button>
      <button class="no" id="noBtn">No üôà</button>
      <button class="no" id="replayConfettiBtn">More confetti üéâ</button>
    </div>

    <div class="msg" id="msg"></div>

    <iframe
      src="https://open.spotify.com/embed/track/5s33nLb8BCeeKep2rfG7To?utm_source=generator"
      width="100%"
      height="152"
      frameborder="0"
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
      loading="lazy"
      title="Spotify player">
    </iframe>

    <div class="note">Tap play above üéµ Made with love by Paul-Emmanuel.</div>
  </div>

  <script>
    // -------- Page switching --------
    const page1 = document.getElementById("page1");
    const page2 = document.getElementById("page2");
    const statusEl = document.getElementById("status");
    const answerEl = document.getElementById("answer");
    const correct = "ntd";

    function showPage2() {
      // background sharpen + vignette stays
      document.body.classList.remove("page1");
      document.body.classList.add("page2");

      // swap content
      page1.classList.add("hidden");
      page2.classList.remove("hidden");

      // entrance animation
      page2.classList.remove("popIn");
      void page2.offsetWidth; // restart animation
      page2.classList.add("popIn");

      // confetti longer on unlock
      launchConfetti(14000);
    }

    document.getElementById("unlockBtn").onclick = () => {
      const user = (answerEl.value || "").trim().toLowerCase();
      if (!user) { statusEl.textContent = "Type an answer first üôÇ"; return; }
      if (user === correct) {
        statusEl.textContent = "Correct üòå";
        showPage2();
      } else {
        statusEl.textContent = "Nope üôà Try again.";
      }
    };

    // -------- Yes/No behavior --------
    const msg = document.getElementById('msg');
    document.getElementById('yesBtn').onclick = () => {
      msg.textContent = "Yessss! Screenshot this and send it to me üòÑ‚ù§Ô∏è";
      launchConfetti(18000);
    };

    const noBtn = document.getElementById('noBtn');
    const texts = ["Are you sure? üòÖ","Try again üôÉ","Lauryn please üò≠","Ok last chance üòå"];
    let i = 0;
    noBtn.onclick = () => {
      msg.textContent = texts[i % texts.length];
      i++;
      noBtn.style.transform = `translate(${(Math.random()*80-40).toFixed(0)}px, ${(Math.random()*40-20).toFixed(0)}px)`;
    };

    document.getElementById("replayConfettiBtn").onclick = () => launchConfetti(14000);

    // -------- Confetti (long duration) --------
    const canvas = document.getElementById("confettiCanvas");
    const ctx = canvas.getContext("2d");

    function resizeCanvas() {
      const dpr = window.devicePixelRatio || 1;
      canvas.width = Math.floor(window.innerWidth * dpr);
      canvas.height = Math.floor(window.innerHeight * dpr);
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    window.addEventListener("resize", resizeCanvas);

    function launchConfetti(durationMs = 14000) {
      canvas.classList.remove("hidden");
      resizeCanvas();

      const pieces = [];
      const count = 320;
      const w = window.innerWidth;
      const h = window.innerHeight;

      for (let i = 0; i < count; i++) {
        pieces.push({
          x: Math.random() * w,
          y: -20 - Math.random() * h * 0.2,
          size: 6 + Math.random() * 10,
          vx: -2 + Math.random() * 4,
          vy: 2 + Math.random() * 5,
          rot: Math.random() * Math.PI,
          vr: -0.25 + Math.random() * 0.5
        });
      }

      const start = performance.now();

      function frame(t) {
        const elapsed = t - start;
        ctx.clearRect(0, 0, w, h);

        for (const p of pieces) {
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;
          p.vy += 0.014;

          if (p.x < -30) p.x = w + 30;
          if (p.x > w + 30) p.x = -30;

          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);

          const r = (150 + Math.random()*105) | 0;
          const g = (150 + Math.random()*105) | 0;
          const b = (150 + Math.random()*105) | 0;
          ctx.fillStyle = `rgb(${r},${g},${b})`;

          ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size * 0.7);
          ctx.restore();
        }

        if (elapsed < durationMs) requestAnimationFrame(frame);
        else { ctx.clearRect(0, 0, w, h); canvas.classList.add("hidden"); }
      }
      requestAnimationFrame(frame);
    }
  </script>
</body>
</html>
